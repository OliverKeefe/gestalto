<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/png" href="/public/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="/public/favicon.svg" />
    <link rel="shortcut icon" href="/public/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/public/apple-touch-icon.png" />
    <link rel="manifest" href="/public/site.webmanifest" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gestalt</title>
    <script>
        (function() {
            const storageKey = 'vite-ui-theme';
            const savedTheme = localStorage.getItem(storageKey);
            const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            const isDark = savedTheme === 'dark' || (!savedTheme && systemPrefersDark);

            if (isDark) {
                document.documentElement.style.backgroundColor = '#262626';
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.style.backgroundColor = '#FBF8F1';
                document.documentElement.classList.remove('dark');
            }
        })();
    </script>
    <style>
        #initial-loader {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            width: 100vw;
            position: fixed;
            top: 0;
            left: 0;

            /* 1. Hide it initially */
            opacity: 0;

            /* 2. Wait 400ms, then fade in over 200ms */
            /* Adjust '0.4s' to your preferred "bad latency" threshold */
            animation: delayedFadeIn 1s 0.2s forwards;
        }

        .spinner-img {
            width: 100px;
            height: 100px;
        }

        .dark .spinner-img {
            filter: invert(1);
        }

        @keyframes delayedFadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
    </style>
</head>
<body>
<div id="root">
    <div id="initial-loader">
        <img src="/media/spinner.svg" class="spinner-img" />
    </div>
</div>
<script type="module" src="/src/main.tsx"></script>
</body>
</html>